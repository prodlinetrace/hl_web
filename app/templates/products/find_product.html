{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}

{% block page_content %}
<div class="page-header">
    <h1>{{ _('Find Product') }}</h1>
</div>
<h3>Basic Product Search</h3>
{{ wtf.quick_form(basic_search_form) }}
<br/>
<h3>Find Products within date range</h3>
{{ wtf.quick_form(date_range_search_form) }}

{% endblock %}

{% block scripts %}
	{{ super() }}
	<link rel="stylesheet" href="{{ url_for('static', filename='jquery-ui.css') }}" />
	<script src="{{ url_for('static', filename='jquery-ui.js') }}"></script>
	
	<script type="text/javascript">
		var product_type = $('#type').value;

		$('#type').change(function() {
			var product_type = this.value;
			autocomplete_setup(product_type);
		});

		function autocomplete_setup(product_type) {
			var cache = {};
			$( "#serial" ).autocomplete({
				minLength: 1,
				source: function( request, response ) {
					var term = request.term;
					if ( term in cache ) {
						response( cache[ term ] );
						return;
					}
					$.getJSON( "/api/autocomplete/" + product_type, request, function( data, status, xhr ) {
						cache[ term ] = data;
						response( data );
					});
				}
			});
		}
      </script>
{% endblock %}
